/*
 +^^^^^^^^^^^^^^^^^^^^^^                                                                                                   +^^^^^^^^^^^;                                :^^^^^^^^^^^^         +^^^^^^^^^^^^^^^^^^^%?^^^^^^^^^%%^^^^^^^^^^;                                         
 S@@@@@@@@@@@@@@@@@@@@@@                                                                                                   S@@@@@@@@@@@%                                +@@@@@@@@@@@@.        S@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%                                         
 S@@@%;;;;;;;;;;;;;;;;S@                                                                                                   S#;;;;;;;;;@%                                +@+;;;;;;;;S@         S#;;;;;;;;;;;;;;;;;+@#;;;;;;;;;@#;;;;;;;;;@%                                         
 S@@?,,,,,,,,,,,,,,,,,%@                                                                                                   S#,,,,,,,,,@%                                +@:,,,,,,,,%@.        S#,,,,,,,,,,,,,,,,,:@#,,,,,,,,,@#,,,,,,,,,@%                                         
 S@%,,,,,,,,,,,,,,,,,,%@::::::::::::::::::+;:::::::::::::::::::++::::::::::::::::::+;::::::::::::::::::+;::::::::::::::::::##,,,,,,,,,@S::++::::::::::::::::::+;::::::::?@:,,,,,,,,%@         S#,,,,,,,,,,,,,,,,,:@@?????????@#,,,,,,,,,@S:::::::::::::::::::,                     
 S#,,,,,,,,,,,,,,,,,,,@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#,,,,,,,,,@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@:,,,,,,,,%@.        S#,,,,,,,,,,,,,,,,,:@@@@@@@@@@@@#,,,,,,,,,@@@@@@@@@@@@@@@@@@@@@^                     
 S#,,,,,,,,,,,,,,,,,,,@@@@%;;;;;;;;;;;+#@@@#;;;;;;;;;;;;;;;;?@@@@@@%;;;;;;;;;;;+#@@@#;;;;;;;#@@@^;;;;;+@#;;;;;;;;;;;;;;+#@@@#,,,,,,,,,;;;;@@@@%;;;;;;;;;;;+#@@@@@@%;;;;;;;,,,,,,,,,%@         S#,,,,,,,,,,,,,,,,,:@#,,,,,,,,,@#,,,,,,,,,@@@@%;;;;;;;;;;;+#@@@^                     
 S#,,,,,,,,,,,,,,,,,,,@@@%,,,,,,,,,,,,,:#@@#,,,,,,,,,,,,,,,,,^@@@@%,,,,,,,,,,,,,:#@@#,,,,,,,^@@#,,,,,,:@#,,,,,,,,,,,,,,,:#@@#,,,,,,,,,,,,,#@@%,,,,,,,,,,,,,:#@@@@?,,,,,,,,,,,,,,,,,%@         S#,,,,,,,,,,,,,,,,,:@#,,,,,,,,,@#,,,,,,,,,@@@%,,,,,,,,,,,,,:#@@^                     
 S#:::::::::::::::::::@@%::::::::::::::::#@#::::::::::::::::::?@@%::::::::::::::::#@#::::::::#@+::::::;@#:::::::::::::::::#@#:::::::::::::#@%::::::::::::::::#@@%::::::::::::::::::%@         S#:::::::::::??????%@#:::::::::@#:::::::::@@%::::::::::::::::#@^                     
 S#:::::::::::::::::::@#:::::::::::::::::;@#:::::::::::::::::::@#:::::::::::::::::;@#::::::::^S:::::::;@#:::::::::::::::::;@#:::::::::::::@#:::::::::::::::::;@#:::::::::::::::::::%@         S#:::::::::::@@@@@@@@#:::::::::@#:::::::::@#:::::::::::::::::;@^                     
 S#:::::::::S@@@@@@@@@@#:::::::::::::::::;@#:::::::::::::::::::@#:::::::::::::::::;@#:::::::::;:::::::;@#:::::::;:::::::::;@#:::::::::::::@#:::::::::::::::::;@#:::::::::::::::::::%@         S#:::::::::::++++++^@#:::::::::@#:::::::::@#:::::::::::::::::;@^                     
 S#;;;;;;;;;S@%%%%%%%%@#;;;;;;%####?;;;;;+@#;;;;;;;;;;;;;;;;;;;@#;;;;;;%####?;;;;;+@#;;;;;;;;;;;;;;;;;+@#;^?%S##@;;;;;;;;;;@#;;;;;;;;;;;;;@#;;;;;;%####?;;;;;+@#;;;;;;;;;^;;;;;;;;;%@         S#;;;;;;;;;;;;;;;;;+@#;;;;;;;;;@#;;;;;;;;;@#;;;;;;%####?;;;;;+@^                     
 S#;;;;;;;;;S#;;;;;;;;@#;;;;;;%####?;;;;;+@#;;;;;;;;;;;;;;;;;;;@#;;;;;;%####?;;;;;+@#;;;;;;;;;;;;;;;;;+@@@@@@@#S%;;;;;;;;;+@#;;;;;;;;;;;;;@#;;;;;;%####?;;;;;+@#;;;;;;;;+@?;;;;;;;;%@         S#;;;;;;;;;;;;;;;;;+@#;;;;;;;;;@#;;;;;;;;;@#;;;;;;%####?;;;;;+@^                     
 S#;;;;;;;;;S#;;;;;;;;@#;;;;;;;;;;;;;;;;;+@#;;;;;;;;;^+;;;;;;;;@#;;;;;;;;;;;;;;;;;+@#;;;;;;;;;;;;;;;;;+@@%%^+;;;;;;;;;;;;;+@#;;;;;;;;?@@@@@#;;;;;;;;;;;;;;;;;+@#;;;;;;;;^@?;;;;;;;;S@         S#;;;;;;;;;;;;;;;;;+@#;;;;;;;;;@#;;;;;;;;;@#;;;;;;;;;;;;;;;;;+@^                     
 S#;;;;;;;;;S#;;;;;;;;@#;;;;;;;;;;;;;;;;;+@#;;;;;;;;^@?;;;;;;;;@#;;;;;;;;;;;;;;;;;+@#;;;;;;;;;;;;;;;;;+@#;;;;;;;;;;;;;;;;;+@#;;;;;;;;?####@#;;;;;;;;;;;;;;;;;+@#;;;;;;;;^@?;;;;;;;;S@         S#;;;;;;;;;;;;;;;;;+@#;;;;;;;;;@#;;;;;;;;;@#;;;;;;;;;;;;;;;;;+@^                     
 S#+++++++++S#++++++++@#++++++++++++++^^?%@#++++++++^@?++++++++@#++++++++++++++^^?%@#++++++++++++++++++@#++++++++++++++++++@#+++++++++++++@#++++++++++++++^^?%@#++++++++^@?++++++++S@         S#++++++++++++++++++@#+++++++++@#+++++++++@#++++++++++++++^^?%@^                     
 S#+++++++++++++++++++@#+++++++++^%#@@@@@@@#++++++++^@?++++++++@#+++++++++^%#@@@@@@@#+++++++++^^^^^^^^?@#++++++#@@@@%+++++^@#+++++++++++++@#+++++++++^%#@@@@@@@#++++++++^@?++++++++S@         S#+++++++++^^^^^^^^?@#+++++++++@#+++++++++@#+++++++++^%#@@@@@@@^                     
 S#+++++++++++++++++++@#+++++++++^@@#S?^^+@#++++++++^@?++++++++@#+++++++++^@@#S?^^+@#+++++++++@@@@@@@@@@#++++++%####?++++++@#+++++++++++++@#+++++++++^@@#S?^^+@#+++++++++++++++++++S@         S#+++++++++@@@@@@@@@@#+++++++++@#+++++++++@#+++++++++^@@#S?^^+@^                     
 S#+++++++++++++++++++@#++++++++++++++++++@#++++++++^@?++++++++@#++++++++++++++++++@#+++++++++@@@@@@@@@@#++++++++++++++++++@#+++++++++++++@#++++++++++++++++++@#+++++++++++++++++++S@         S#+++++++++@@@@@@@@@@#+++++++++@#+++++++++@#++++++++++++++++++@^                     
 S@^;;;;;;;;;;;;;;;;;;@@^;;;;;;;;;;;;;;;;+@#;;;;;;;;^@?;;;;;;;;@@^;;;;;;;;;;;;;;;;+@#;;;;;;;;;@@@@@@@@@@@^;;;;;;;;;;;;;;;;+@@^;;;;;;;;;;;;@@^;;;;;;;;;;;;;;;;+@@^;;;;;;;;;;;;;;;;;;S@         S#;;;;;;;;;@@@@@@@@@@#;;;;;;;;;@@^;;;;;;;;@@^;;;;;;;;;;;;;;;;+@^                     
 S@@+;;;;;;;;;;;;;;;;;@@#+;;;;;;;;;;;;;;;+@#;;;;;;;;^@?;;;;;;;;@@#+;;;;;;;;;;;;;;;+@#;;;;;;;;;@@@@@@@@@@@#+;;;;;;;;;;;;;;;+@@@+;;;;;;;;;;;@@#+;;;;;;;;;;;;;;;+@@@+;;;;;;;;;;;;;;;;;S@         S#;;;;;;;;;@@@@@@@@@@#;;;;;;;;;@@@+;;;;;;;@@#+;;;;;;;;;;;;;;;+@^                     
 S@@@+;;;;;;;;;;;;;;;;@@@@+;;;;;;;;;;;;;;+@#;;;;;;;;^@?;;;;;;;;@@@@+;;;;;;;;;;;;;;+@#;;;;;;;;;@@@@@@@@@@@@@+;;;;;;;;;;;;;;+@@@@+;;;;;;;;;;@@@@+;;;;;;;;;;;;;;+@@@@+;;;;;;;;;;;;;;;;S@         S#;;;;;;;;;@@@@@@@@@@#;;;;;;;;;@@@@+;;;;;;@@@@+;;;;;;;;;;;;;;+@^                     
 S@@@@%%%%%%%%%%%%%%%%@@@@@%%%%%%%%%%%%%%%@@%%%%%%%%S@S%%%%%%%%@@@@@%%%%%%%%%%%%%%%@@%%%%%%%%%@@@@@@@@@@@@@@%%%%%%%%%%%%%%%@@@@@%%%%%%%%%%@@@@@%%%%%%%%%%%%%%%@@@@@%%%%%%%%%%%%%%%%#@         S@%%%%%%%%%@@@@@@@@@@@%%%%%%%%%@@@@@%%%%%%@@@@@%%%%%%%%%%%%%%%@^                     
 #@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         #@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@?                     
 S@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         S@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@^                     
 S@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         S@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@^                     
 S@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#SS#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#SS#@@@@@@@@@@@@@@@@#SS#@@@@@@@@@@@@@@@@#SS#@@@@@@@@@@@@@#@@@@@@@@@@@@@@@@@#SS#@@@@@@@@@@@@@@@@@@@@S^         S@@@@@@@@@@@@@@@@#SS#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#SS^,                     
 S@@@@@@@@@@@@@@@@@#^.S@@@@@@@@@@@@S?+.   S@@@@@@@@@@@@@@@@@#^.S@@@@@@@@@@@@S?+.   S@@@@@@@@@@@@S?+.   S@@@@@@@@@@@@S?+.   S@@@@@@@@@#?+, S@@@@@@@@@@@@S?+.   S@@@@@@@@@@@@@@@@@#^.           S@@@@@@@@@@@@S?+.   S@@@@@@@#+.S@@@@@@@#+.S@@@@@@@@@@@@S?+.                          
 S@@@@@@@@@@@@@@@S;.  S@@@@@@@@S^;.       S@@@@@@@@@@@@@@@S;.  S@@@@@@@@S^;.       S@@@@@@@@S^;.       S@@@@@@@@S^;.       S@@@@@@S^,     S@@@@@@@@S^;.       S@@@@@@@@@@@@@@@S;.             S@@@@@@@@S^;.       S@@@@#?;   S@@@@#?;   S@@@@@@@@S^;.                              
 +^^^^^^^^^^^^^^:.    +^^^^^^:.           +^^^^^^^^^^^^^^:.    +^^^^^^:.           +^^^^^^:.           +^^^^^^:.           +^^^^:.        +^^^^^^:.           +^^^^^^^^^^^^^^:.               +^^^^^^:.           +^^^,      +^^^,      +^^^^^^:.                                  
 */
using Microsoft.AspNetCore.Mvc;

namespace CSharpControllers.Output.Controllers {
  [Route("api/v1/Fidgets"), ApiController]
  public class Fidgets : Controller {
    private readonly EntityDbContext _db;

    public Fidgets(EntityDbContext db) {
      _db = db;
    }


    [HttpPost()]
    public IActionResult<Fidget> Post([FromBody] Fidget fidget) {
      Fidget dbFidget = new Fidget();
      dbFidget.Id = Guid.NewGuid();
      dbFidget.Name = fidget.Name;
      _db.Add(dbFidget);
      _db.SaveChanges();
      return Ok(dbFidget);
    }

    [HttpPut()]
    public IActionResult<Fidget> Put([FromBody] Fidget fidget) {
      var dbFidget = _db.Fidgets.Single(x => x.Id.Equals(fidget.Id));
      dbFidget.Name = fidget.Name;
      _db.Update(dbFidget);
      _db.SaveChanges();
      return Ok(dbFidget);
    }

    [HttpGet("/:id")]
    public IActionResult<List<Fidget>> GetAll([FromRoute] Guid id) {
      return Ok(_db.Fidgets.Single(x => x.Id.Equals(id)));
    }

  }
}